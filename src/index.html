<!DOCTYPE html>
<html>

<head>
  <title>Leaflet Draw</title>

  <link rel="stylesheet" href="http://leaflet.github.io/Leaflet.draw/lib/leaflet/leaflet.css" />
  <link rel="stylesheet" href="http://leaflet.github.io/Leaflet.draw/leaflet.draw.css" />


  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
  <script src="OsmMerge.min.js"></script>
</head>

<body>
  <div id="map" style="width: 800px; height: 600px; border: 1px solid #ccc"></div>
  <script>
    var tileLayers = {
      naip: new L.tileLayer('http://navigator.er.usgs.gov/tiles/tilecache.cgi/1.0.0/naip/{z}/{x}/{y}',
        {
          attribution: ['USGS National Agriculture Imagery Program',
            '<a href="http://www.doi.gov" target="_blank">U.S. Department of the Interior</a>',
            '<a href="http://www.usgs.gov" target="_blank">U.S. Geological Survey</a>',
            '<a href="http://www.usgs.gov/laws/policies_notices.html" target="_blank">Policies</a>'
          ].join(' | ')
        }),
        mapQuestTile: new L.OSM.MapQuestOpen()
      };
      map = new L.Map('map',
      {
        layers: [tileLayers.naip],
        center: new L.LatLng(39.7772, -105),
        zoom: 15
      });

      var drawnItems = new L.FeatureGroup();
      map.addLayer(drawnItems);

      var drawControl = new L.Control.Draw(
      {
        position: 'topright',
        draw:
        {
          polyline: false,
          polygon: false,
          circle: false,
          rectangle: false,
          marker:
          {}
        },
        edit:
        {
          featureGroup: drawnItems,
          remove: false
        }
      });
      map.addControl(drawControl);

      map.on('draw:created', function(e)
      {
        var type = e.layerType,
          layer = e.layer;

        if (type === 'marker')
        {
          if (!layer._popup)
          {
            layer.bindPopup('A popup!');
          }
        }

        drawnItems.addLayer(layer);
      });

      map.on('draw:edited', function(e)
      {
        var layers = e.layers;
        var countOfEditedLayers = 0;
        layers.eachLayer(function(layer)
        {
          countOfEditedLayers++;
        });
        console.log("Edited " + countOfEditedLayers + " layers");
      });
  </script>
</body>

</html>
